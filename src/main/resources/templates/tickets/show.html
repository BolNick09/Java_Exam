<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Ticket</title>
</head>
<body>

<h1>Тикет #<span th:text="${ticket.id}"></span></h1>

<p><b>Заголовок:</b> <span th:text="${ticket.title}"></span></p>
<p><b>Описание:</b></p>
<p th:text="${ticket.description}"></p>

<p><b>Статус:</b> <span th:text="${ticket.status}"></span></p>
<p><b>Пользователь:</b> <span th:text="${ticket.user.email}"></span></p>

<p>
    <b>Агент:</b>
    <span th:text="${ticket.agent != null ? ticket.agent.email : 'Не назначен'}"></span>
</p>

<hr>

<h3>Комментарии</h3>

<div th:each="comment : ${ticket.comments}">
    <p>
        <b th:text="${comment.author.email}"></b>
        <small th:text="${#temporals.format(comment.createdAt, 'dd.MM.yyyy HH:mm')}"></small>
    </p>
    <p th:text="${comment.text}"></p>
    <hr>
</div>

<form th:action="@{/tickets/{id}/comments(id=${ticket.id})}" method="post">
    <textarea name="text" required rows="4" cols="60"></textarea><br>
    <button type="submit">Добавить комментарий</button>
</form>

<hr>

<a href="/tickets">← Назад к списку</a>

</body>
</html>
